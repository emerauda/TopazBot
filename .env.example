###############################################
# TopazBot .env example
# 右側の値を自分の環境に合わせて書き換えてください。
# 使わないオプションは削除またはコメントアウト可。
###############################################

########################
# Discord 基本設定
########################
# Discord Bot トークン (必須)
DISCORD_TOKEN=your_discord_bot_token_here

########################
# RTSP 入力設定
########################
# RTSP ベースURL (末尾に /<streamkey> が付与される)
# 既定: rtsp://topaz.chat/live
RTSP_SERVER_URL=rtsp://topaz.chat/live
# 例:
# RTSP_SERVER_URL=rtsp://stream.vrcdn.live/live
# RTSP_SERVER_URL=rtsp://192.168.1.100:8554/live

########################
# 音声出力モード切替
########################
# 外部FFmpegで直接 Opus(Ogg) を生成 (推奨)。0 にすると AAC(ADTS) 出力 → discord.js 側で再エンコード。
USE_EXTERNAL_OPUS=1
# 入力 RTSP が既に Opus(48k stereo) の場合、libopus再エンコードせず -c:a copy で Ogg にリマックス。
INPUT_IS_OPUS=1
# copy を無効化して常に再エンコードしたい場合 (ノイズ対策/フィルタ適用時など)
FORCE_OPUS_REENCODE=0

########################
# 音質 / ビットレート
########################
# Opus の目標ビットレート (FFmpeg の -b:a)。例: 128k / 160k / 192k / 256k
OPUS_BITRATE=192k
# AAC フォールバック時のビットレート。未指定なら OPUS_BITRATE を流用。
# AAC_BITRATE=192k

########################
# チャンネル操作 / デバッグ
########################
# DOWNMIX_MONO=1 で入力をモノラル化 (-ac 1) し、その後ステレオ化せずそのまま送出。
DOWNMIX_MONO=0
# 破損フレームを破棄し PTS 再生成 (copy 時に有効化) ※copy + 低遅延時は +nobuffer を併用
COPY_WITH_DISCARDCORRUPT=1
# チャンネル修正モード none|swap|left|right|mix
CHANNEL_FIX_MODE=none
# FFmpeg デバッグログ (stderr) を表示
DEBUG_FFMPEG=0

########################
# 低遅延関連
########################
# RTSP/FFmpeg バッファ削減 & 解析時間短縮。1 で nobuffer / analyzeduration=0 等を付与。
LOW_LATENCY=1
# 再生開始後に安定判定まで待つ時間(ms)。LOW_LATENCY=1 の既定 300ms。調整したい場合のみ明示。
# PLAY_WAIT_MS=300
# 自動再開(リトライ)前の待機(ms)。LOW_LATENCY=1 の既定 500ms。
# RESUME_WAIT_MS=500

########################
# 強制再エンコード/フィルタ適用時 (必要な場合のみ)
########################
# チャンネル補正やダウンミックスを使いたいが INPUT_IS_OPUS=1 で copy になってしまう場合、
# FORCE_OPUS_REENCODE=1 を設定して再エンコード経路を強制できます。

###############################################
# 推奨最小セット (Opus コピー最小遅延):
#   USE_EXTERNAL_OPUS=1
#   INPUT_IS_OPUS=1
#   FORCE_OPUS_REENCODE=0
#   LOW_LATENCY=1
#   OPUS_BITRATE=192k
#   CHANNEL_FIX_MODE=none
###############################################